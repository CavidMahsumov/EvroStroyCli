<div class="admin-panel">
  <aside class="sidebar">
    <h2>Admin Panel</h2>
    <ul>
      <li><a (click)="goToHome()">Ana Səhifə</a></li>
      <li><a>Məhsullar</a></li>
      <li><a>Sifarişlər</a></li>
      <li><a>Müştərilər</a></li>
      <li><a>Statistikalar</a></li>
      <li><a>Parametrlər</a></li>
    </ul>
  </aside>

  <main class="content">
    <h1>Məhsullar</h1>

    <div class="search-box">
      <input type="text" [(ngModel)]="searchQuery" placeholder="ID və ya Ad axtar..." />
      <button (click)="filterProducts()">Axtar</button>
    </div>

    <button (click)="openAddProductModal()">Məhsul Əlavə Et</button>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Adı</th>
          <th>Marka</th>
          <th>Qiymət</th>
          <th>Şəkil</th>
          <th>Əməliyyatlar</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of filteredProducts">
          <td>{{ product.id }}</td>
          <td>{{ product.name }}</td>
          <td>{{ product.marka }}</td>
          <td>{{ product.price }} AZN</td>
          <td>
            <img *ngIf="product.imageUrl" [src]="product.imageUrl" alt="Şəkil" width="50" />
            <span *ngIf="!product.imageUrl">Şəkil Yoxdur</span>
          </td>
          <td>
            <button (click)="openEditProductModal(product)">Redaktə Et</button>
            <!-- <button (click)="deleteProduct(product.id)">Sil</button> -->
          </td>
        </tr>
      </tbody>
    </table>

    <div class="modal" *ngIf="isProductModalOpen">
      <div class="modal-content">
        <h2>{{ isEditing ? 'Məhsulu Redaktə Et' : 'Yeni Məhsul Əlavə Et' }}</h2>
        
        <form [formGroup]="productForm" (ngSubmit)="saveProduct()">
          <label for="name">Məhsul Adı:</label>
          <input id="name" formControlName="name" required />
    
          <label for="Description">Təsvir:</label>
          <textarea id="Description" formControlName="description"></textarea>
    
          <label for="marka">Marka:</label>
          <input id="marka" formControlName="marka" required />
    
          <label for="categoryId">Kateqoriya ID:</label>
          <input id="categoryId" formControlName="categoryId" type="number" required />
    
          <label for="subCategoryId">Sub-Kateqoriya ID:</label>
          <input id="subCategoryId" formControlName="subCategoryId" type="number" required />
    
          <label for="price">Qiymət:</label>
          <input id="price" formControlName="price" type="number" step="0.01" required />
    
          <label for="costPrice">Maya Dəyəri:</label>
          <input id="costPrice" formControlName="costPrice" type="number" step="0.01" required />
    
          <label for="quantity">Miqdar:</label>
          <input id="quantity" formControlName="quantity" type="number" required />
    
          <label for="saleCount">Satış Sayı:</label>
          <input id="saleCount" formControlName="saleCount" type="number" required />
    
          <label for="rating">Reytinq:</label>
          <input id="rating" formControlName="rating" type="number" min="0" max="5" step="0.1" />
    
          <label for="hasStock">Anbarda Var:</label>
          <input id="hasStock" type="checkbox" formControlName="hasStock" />
    
          <label for="productImage">Şəkil:</label>  
          <input type="file" id="productImage" (change)="onImageSelected($event)" accept="image/*" />
    
          <button type="submit" [disabled]="productForm.invalid">
            {{ isEditing ? 'Yadda Saxla' : 'Əlavə Et' }}
          </button>
          <button type="button" (click)="isProductModalOpen = false">Bağla</button>
        </form>
      </div>
    </div>
    
    
   
  </main>
</div>
